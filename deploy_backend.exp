#!/usr/bin/expect -f
set timeout 30
set password "eCTyD*R.94zTba"

spawn scp -o StrictHostKeyChecking=no /Users/valeriiguro/Desktop/AVATARv1.0/backend/app/routers/profile.py root@103.74.92.72:/root/avatar/backend/app/routers/profile.py
expect "*assword:*" { send "$password\r"; exp_continue } eof

spawn scp -o StrictHostKeyChecking=no /Users/valeriiguro/Desktop/AVATARv1.0/backend/app/routers/sync.py root@103.74.92.72:/root/avatar/backend/app/routers/sync.py
expect "*assword:*" { send "$password\r"; exp_continue } eof

spawn scp -o StrictHostKeyChecking=no /Users/valeriiguro/Desktop/AVATARv1.0/backend/app/core/astrology/aspect_calculator.py root@103.74.92.72:/root/avatar/backend/app/core/astrology/aspect_calculator.py
expect "*assword:*" { send "$password\r"; exp_continue } eof

spawn scp -o StrictHostKeyChecking=no /Users/valeriiguro/Desktop/AVATARv1.0/backend/app/core/astrology/natal_chart.py root@103.74.92.72:/root/avatar/backend/app/core/astrology/natal_chart.py
expect "*assword:*" { send "$password\r"; exp_continue } eof

spawn scp -o StrictHostKeyChecking=no /Users/valeriiguro/Desktop/AVATARv1.0/backend/app/core/astrology/priority_engine.py root@103.74.92.72:/root/avatar/backend/app/core/astrology/priority_engine.py
expect "*assword:*" { send "$password\r"; exp_continue } eof

spawn ssh -o StrictHostKeyChecking=no root@103.74.92.72 "systemctl restart avatar-backend"
expect "*assword:*" { send "$password\r"; exp_continue } eof
